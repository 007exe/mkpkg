== ABUILD: основы ==

Как уже говорилось в начале, процесс сборки пакета описывается с помощью файла, имеющего имя ABUILD.


=== Именование файлов ===

Для каждого пакета, файл должен находиться в отдельной директории, и иметь именно такое имя. Например, ваша директория с ABUILD'ами к разным пакетам должна иметь подобный вид:

<code>
pkg1/ABUILD
pkg2/ABUILD
...
</code>


=== Дополнительные файлы ===

Кроме ABUILD, в директории могут находиться и другие файлы. Существуют три категории файлов:

* Патчи: находятся в директории patches
* Скрипты установки (doinst.sh, preremove.sh, postremove.sh): находятся на одном уровне рядом с ABUILD
* Прочие файлы: находятся в директории files

Все остальные файлы будут проигнорированы.


=== Синтаксис ABUILD ===

Строго говоря, с точки зрения общего синтаксиса ABUILD представляет из себя ни что иное, как bash-скрипт. Однако чтобы mkpkg правильно его обработал, он должен соответствовать ряду правил:

# Должны быть определены обязательные переменные (такие как имя пакета, версия, и другие)
# Должно быть описание процесса его сборки (либо указана система сборки через переменную BUILD_SYSTEM), либо определена функция build(), описывающая процесс сборки

Традиционно, принято определять обязательные переменные в начале, а функции - в конце.

Пример одного из самых простых ABUILD:

<code>
pkgname=alsa-lib
pkgver=1.0.25
pkgbuild=1
arch=('auto')

shortdesc=('Advanced Linux Sound Architecture library')

tags=('libs media-libs')
source=("ftp://ftp.alsa-project.org/pub/lib/${pkgname}-${pkgver}.tar.bz2")
build_deps='python glibc-solibs'

BUILD_SYSTEM='autotools'
BUILD_KEYS="--prefix=/usr --libdir=/usr/lib$LIBDIRSUFFIX"
INSTALL_KEYS="DESTDIR=$pkgdir"
</code>

В дальнейших главах мы разберем все по порядку.
